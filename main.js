// --- Translations ---
const translations = {
    ko: {
        pageTitle: "LottoLuck - 행운의 로또 번호 생성기",
        lottoLuck: "LottoLuck",
        home: "홈",
        blog: "블로그",
        about: "소개",
        contact: "문의",
        privacyPolicy: "개인정보처리방침",
        countrySpecificLottoNumberRecommendation: "국가별 로또 번호 추천",
        lottoGeneratorSubtitle: "아래에서 로또 종류를 선택하고 행운의 번호를 받아보세요!",
        koreaLotto: "한국 로또 6/45",
        usPowerball: "미국 파워볼",
        euromillions: "유로밀리언",
        generateNumbers: "번호 생성",
        howToPlayTitle: "게임 방법",
        koreaLottoRules: "1부터 45까지의 숫자 중 6개의 번호를 선택합니다. 매주 토요일 추첨합니다.",
        usPowerballRules: "1부터 69까지의 화이트볼 5개와 1부터 26까지의 파워볼 1개를 선택합니다. 잭팟 당첨 확률이 매우 낮지만, 상금이 어마어마합니다.",
        euromillionsRules: "1부터 50까지의 메인 번호 5개와 1부터 12까지의 럭키 스타 번호 2개를 선택합니다. 유럽 9개국에서 공동으로 운영합니다.",
        statisticsTitle: "재미로 보는 통계",
        hotNumbers: "자주 나온 번호 (Hot)",
        hotNumbersDesc: "최근 추첨에서 자주 등장한 번호들입니다. (자리 표시자 데이터)",
        coldNumbers: "오래 나온 번호 (Cold)",
        coldNumbersDesc: "최근 추첨에서 오랫동안 등장하지 않은 번호들입니다. (자리 표시자 데이터)",
        aboutPageTitle: "소개 - LottoLuck",
        aboutUs: "소개",
        aboutUsWelcome: "LottoLuck에 오신 것을 환영합니다! 저희는 가장 재미있고 즐거운 로또 번호 생성 경험을 제공하기 위해 최선을 다하고 있습니다.",
        aboutUsMission: "저희의 임무는 전 세계 로또 애호가들을 위해 간단하고 재미있으며 유용한 도구를 제공하는 것입니다. 저희는 게임의 스릴과 잭팟의 꿈을 믿으며, 여러분의 여정에 함께하고 싶습니다.",
        aboutUsProject: "이 웹사이트는 웹을 위한 유용한 것을 만드는 것을 좋아하는 열정적인 개발자가 만들고 유지하는 1인 프로젝트입니다. 저희는 지속적으로 사이트를 개선하고 새로운 기능을 추가하기 위해 노력하고 있습니다.",
        aboutUsThanks: "방문해주셔서 감사합니다. 행운을 빕니다!",
        contactPageTitle: "문의 - LottoLuck",
        contactUsTitle: "문의하기",
        contactUsMessage: "질문, 피드백 또는 파트너십 문의가 있으시면 아래 양식을 사용하여 언제든지 저희에게 연락주세요.",
        nameLabel: "이름",
        namePlaceholder: "이름을 입력하세요",
        emailLabel: "이메일",
        emailPlaceholder: "이메일 주소를 입력하세요",
        messageLabel: "메시지",
        messagePlaceholder: "메시지를 입력하세요...",
        submitInquiry: "문의 제출",
        blogPageTitle: "블로그 - LottoLuck",
        blogTitle: "블로그",
        blogSubtitle: "로또와 관련된 최신 소식, 팁, 그리고 재미있는 이야기들을 만나보세요.",
        blogPost1Title: "로또 당첨 번호, 패턴이 있을까?",
        blogPost1Content: "많은 사람들이 로또 번호에 패턴이 있다고 믿지만, 통계적으로 모든 번호의 당첨 확률은 동일합니다. 하지만 '핫' 번호와 '콜드' 번호 같은 재미있는 통계를 참고하여 자신만의 행운의 조합을 만들어보는 것은 어떨까요? 이 글에서는 번호 선택에 대한 몇 가지 재미있는 접근법을 탐구해봅니다.",
        blogPost2Title: "미국 파워볼, 1조원 잭팟의 꿈",
        blogPost2Content: "미국 파워볼은 세계에서 가장 큰 잭팟 상금으로 유명합니다. 때로는 1조원이 훌쩍 넘는 당첨금이 나오기도 하죠. 파워볼은 어떻게 운영되며, 한국에서도 참여할 수 있을까요? 이 글에서는 파워볼의 역사와 게임 방법, 그리고 역대 최고 당첨금 기록에 대해 알아봅니다.",
        koreaLottoInfo: "1부터 45까지의 숫자 중 6개를 선택합니다.",
        usPowerballInfo: "1부터 69까지의 숫자 5개와 1부터 26까지의 파워볼 숫자 1개를 선택합니다.",
        euromillionsInfo: "1부터 50까지의 숫자 5개와 1부터 12까지의 럭키 스타 숫자 2개를 선택합니다."
    },
    en: {
        pageTitle: "LottoLuck - Lucky Lotto Number Generator",
        lottoLuck: "LottoLuck",
        home: "Home",
        blog: "Blog",
        about: "About",
        contact: "Contact",
        privacyPolicy: "Privacy Policy",
        countrySpecificLottoNumberRecommendation: "Country-Specific Lotto Number Recommendation",
        lottoGeneratorSubtitle: "Select a lottery below and get your lucky numbers!",
        koreaLotto: "Korea Lotto 6/45",
        usPowerball: "US Powerball",
        euromillions: "EuroMillions",
        generateNumbers: "Generate Numbers",
        howToPlayTitle: "How to Play",
        koreaLottoRules: "Choose 6 numbers from 1 to 45. Draws are held every Saturday.",
        usPowerballRules: "Choose 5 white balls from 1 to 69 and 1 Powerball from 1 to 26. The odds of winning the jackpot are very low, but the prizes are enormous.",
        euromillionsRules: "Choose 5 main numbers from 1 to 50 and 2 Lucky Star numbers from 1 to 12. It is jointly operated by 9 European countries.",
        statisticsTitle: "Fun Statistics",
        hotNumbers: "Hot Numbers",
        hotNumbersDesc: "Numbers that have appeared frequently in recent draws. (Placeholder data)",
        coldNumbers: "Cold Numbers",
        coldNumbersDesc: "Numbers that have not appeared for a long time in recent draws. (Placeholder data)",
        aboutPageTitle: "About - LottoLuck",
        aboutUs: "About Us",
        aboutUsWelcome: "Welcome to LottoLuck! We are dedicated to providing you with the best and most entertaining lottery number generation experience.",
        aboutUsMission: "Our mission is to offer a simple, fun, and useful tool for lottery enthusiasts around the world. We believe in the thrill of the game and the dream of hitting the jackpot, and we want to be a part of your journey.",
        aboutUsProject: "This website is a one-person project, created and maintained by a passionate developer who loves to build useful things for the web. We are constantly working to improve the site and add new features.",
        aboutUsThanks: "Thank you for visiting, and good luck!",
        contactPageTitle: "Contact - LottoLuck",
        contactUsTitle: "Contact Us",
        contactUsMessage: "If you have any questions, feedback, or partnership inquiries, please don't hesitate to reach out to us using the form below.",
        nameLabel: "Name",
        namePlaceholder: "Your Name",
        emailLabel: "Email",
        emailPlaceholder: "Your Email",
        messageLabel: "Message",
        messagePlaceholder: "Your message...",
        submitInquiry: "Submit Inquiry",
        blogPageTitle: "Blog - LottoLuck",
        blogTitle: "Blog",
        blogSubtitle: "Check out the latest news, tips, and fun stories related to lotteries.",
        blogPost1Title: "Is There a Pattern in Lottery Winning Numbers?",
        blogPost1Content: "Many people believe there are patterns in lottery numbers, but statistically, the probability of any number being drawn is the same. However, why not create your own lucky combination by referencing interesting statistics like 'hot' and 'cold' numbers? In this article, we explore some fun approaches to number selection.",
        blogPost2Title: "The Dream of the $1 Billion US Powerball Jackpot",
        blogPost2Content: "The US Powerball is famous for having the largest jackpots in the world, sometimes exceeding $1 billion. How does Powerball work, and can you participate from outside the US? In this article, we delve into the history of Powerball, how to play, and the all-time record jackpots.",
        koreaLottoInfo: "Choose 6 numbers from 1 to 45.",
        usPowerballInfo: "Choose 5 numbers from 1 to 69 and 1 Powerball number from 1 to 26.",
        euromillionsInfo: "Choose 5 main numbers from 1 to 50 and 2 Lucky Star numbers from 1 to 12."
    }
};

// --- Internationalization (i18n) Logic ---
let currentLang = localStorage.getItem('lang') || 'ko'; // Default to Korean

function translatePage() {
    document.documentElement.lang = currentLang;

    const lang = currentLang;
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            element.innerHTML = translations[lang][key];
        }
    });

    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        if (translations[lang] && translations[lang][key]) {
            element.placeholder = translations[lang][key];
        }
    });

    const activeLangSpan = document.getElementById('active-lang');
    if (activeLangSpan) {
        activeLangSpan.textContent = lang === 'ko' ? '한국어' : 'English';
    }

    // Update lotto info if it's visible
    const lottoInfoDiv = document.getElementById('lotto-info');
    const lottoTypeSelect = document.getElementById('lotto-type');
    if (lottoInfoDiv && lottoTypeSelect) {
        const selectedLottoKey = lottoTypeSelect.value + 'Info';
        lottoInfoDiv.textContent = translations[currentLang][selectedLottoKey];
    }
}

function setLanguage(lang) {
    localStorage.setItem('lang', lang);
    currentLang = lang;
    translatePage();
}


// --- Lottery Number Generator Logic ---
const generateBtn = document.getElementById('generate');
const numbersDiv = document.getElementById('numbers');
const lottoTypeSelect = document.getElementById('lotto-type');
const lottoInfoDiv = document.getElementById('lotto-info');

const lottoDetails = {
    'korea-lotto': {
        range: 45,
        count: 6,
        infoKey: 'koreaLottoInfo'
    },
    'us-powerball': {
        range: 69,
        count: 5,
        powerballRange: 26,
        powerballCount: 1,
        infoKey: 'usPowerballInfo'
    },
    'euromillions': {
        range: 50,
        count: 5,
        luckyStarRange: 12,
        luckyStarCount: 2,
        infoKey: 'euromillionsInfo'
    }
};

function generateNumbers() {
    if (!lottoTypeSelect) return; // Guard against running on pages without the generator

    const selectedLotto = lottoTypeSelect.value;
    const details = lottoDetails[selectedLotto];

    numbersDiv.innerHTML = '';
    lottoInfoDiv.textContent = translations[currentLang][details.infoKey];

    const numbers = new Set();
    while (numbers.size < details.count) {
        numbers.add(Math.floor(Math.random() * details.range) + 1);
    }

    [...numbers].sort((a, b) => a - b).forEach((number, index) => {
        const numberDiv = document.createElement('div');
        numberDiv.classList.add('number', 'lotto-ball-animated');
        numberDiv.textContent = number;
        numberDiv.style.animationDelay = `${index * 0.1}s`;
        numbersDiv.appendChild(numberDiv);
    });

    if (details.powerballCount) {
        const powerballNumbers = new Set();
        while (powerballNumbers.size < details.powerballCount) {
            powerballNumbers.add(Math.floor(Math.random() * details.powerballRange) + 1);
        }
        [...powerballNumbers].forEach((number, index) => {
            const numberDiv = document.createElement('div');
            numberDiv.classList.add('number', 'powerball', 'lotto-ball-animated');
            numberDiv.textContent = number;
            numberDiv.style.animationDelay = `${(numbers.size + index) * 0.1}s`;
            numbersDiv.appendChild(numberDiv);
        });
    }
    
    if (details.luckyStarCount) {
        const luckyStarNumbers = new Set();
        while (luckyStarNumbers.size < details.luckyStarCount) {
            luckyStarNumbers.add(Math.floor(Math.random() * details.luckyStarRange) + 1);
        }
        [...luckyStarNumbers].sort((a, b) => a - b).forEach((number, index) => {
            const numberDiv = document.createElement('div');
            numberDiv.classList.add('number', 'lucky-star', 'lotto-ball-animated');
            numberDiv.textContent = number;
            numberDiv.style.animationDelay = `${(numbers.size + (details.powerballCount || 0) + index) * 0.1}s`;
            numbersDiv.appendChild(numberDiv);
        });
    }
}


// --- DOMContentLoaded Initialization ---
document.addEventListener('DOMContentLoaded', () => {
    // Set language and translate page
    translatePage();

    // Initialize Sal.js (Scroll Animation Library)
    sal();

    // Attach language switcher event listeners
    const langKoBtn = document.getElementById('lang-ko');
    const langEnBtn = document.getElementById('lang-en');
    if (langKoBtn) langKoBtn.addEventListener('click', (e) => { e.preventDefault(); setLanguage('ko'); });
    if (langEnBtn) langEnBtn.addEventListener('click', (e) => { e.preventDefault(); setLanguage('en'); });

    // Attach lottery generator listeners if on the correct page
    if (generateBtn) {
        generateBtn.addEventListener('click', generateNumbers);
        lottoTypeSelect.addEventListener('change', generateNumbers);
        generateNumbers(); // Initial generation
    }
});